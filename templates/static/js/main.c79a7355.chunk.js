(this["webpackJsonpk-blog"]=this["webpackJsonpk-blog"]||[]).push([[0],{30:function(e,t,c){},31:function(e,t,c){},37:function(e,t){},38:function(e,t,c){},42:function(e,t,c){"use strict";c.r(t);var s=c(1),n=c.n(s),a=c(24),l=c.n(a),r=(c(30),c(31),c(13)),i=c(2),o=c(8),b=c(9),d=c(11),j=c(10),h=c(0),u=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).setTitle=function(e){""!==e&&s.setState({title:e})},s.state={title:""},s}return Object(b.a)(c,[{key:"render",value:function(){return Object(h.jsx)("div",{class:"row",id:"navbar_row",children:Object(h.jsx)("div",{class:"col-md-12",children:Object(h.jsxs)("nav",{class:"container-fullwidth navbar navbar-expand-md navbar-dark bg-dark",children:[Object(h.jsx)("a",{class:"navbar-brand",children:"k."}),Object(h.jsx)("button",{type:"button",class:"navbar-toggler","data-toggle":"collapse","data-target":"#navbarCollapse",children:Object(h.jsx)("span",{class:"navbar-toggler-icon"})}),Object(h.jsxs)("div",{class:"collapse navbar-collapse justify-content-between",id:"navbarCollapse",children:[Object(h.jsxs)("div",{class:"navbar-nav",children:[Object(h.jsx)(r.b,{to:"/",class:"nav-item nav-link active",children:"Home"}),Object(h.jsx)("a",{href:"/",class:"nav-item nav-link",children:"About"}),Object(h.jsxs)("div",{class:"nav-item dropdown",children:[Object(h.jsx)("a",{href:"#",class:"nav-link dropdown-toggle","data-toggle":"dropdown",children:"Apps"}),Object(h.jsxs)("div",{class:"dropdown-menu",children:[Object(h.jsx)(r.b,{to:"/",class:"dropdown-item",children:"Main Page"}),Object(h.jsx)(r.b,{to:"/sneratio",class:"dropdown-item",children:"SNeRatio"}),Object(h.jsx)(r.b,{to:"/sneratio",class:"dropdown-item",children:"SOAD"})]})]})]}),Object(h.jsx)("div",{class:"navbar-nav",children:Object(h.jsx)("a",{href:"#",class:"navbar-brand",children:this.state.title})}),Object(h.jsx)("div",{class:"navbar-nav",children:Object(h.jsx)("a",{href:"#",class:"nav-item nav-link",children:"Login"})})]})]})})})}}]),c}(n.a.Component),O=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){return Object(o.a)(this,c),t.call(this,e)}return Object(b.a)(c,[{key:"render",value:function(){return Object(h.jsx)("div",{class:"row",id:"bottom_navbar_row",children:Object(h.jsx)("div",{class:"col-md-12",children:Object(h.jsx)("nav",{class:"container-fullwidth navbar navbar-expand-md navbar-dark bg-dark",children:Object(h.jsx)("div",{class:"collapse navbar-collapse justify-content-between",id:"navbarCollapse",children:Object(h.jsx)("div",{class:"navbar-nav",children:Object(h.jsx)("a",{href:"#",class:"nav-item nav-link",children:"Copyright"})})})})})})}}]),c}(n.a.Component),_=(c(37),c(12)),p=(c(38),c(16)),v=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).state={},s}return Object(b.a)(c,[{key:"fillSelection",value:function(e,t,c){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=[];if(1==s){var a,l=Object(p.a)(e);try{for(l.s();!(a=l.n()).done;){var r=a.value;n.push(Object(h.jsx)("option",{children:r.slice(0,-4)},r.slice(0,-4)))}}catch(d){l.e(d)}finally{l.f()}}else{var i,o=Object(p.a)(e);try{for(o.s();!(i=o.n()).done;){var b=i.value;n.push(Object(h.jsx)("option",{children:b},b))}}catch(d){o.e(d)}finally{o.f()}}return Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{class:"custom-select-label m-1",children:t}),Object(h.jsx)("select",{class:"custom-select custom-select-sm",id:c,children:n})]})}},{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{onChange:this.props.handleOptions,children:[Object(h.jsx)("p",{id:"selections_header",class:"m-4 text-center",children:"Selections"}),Object(h.jsx)("hr",{class:"mt-3 mb-3"}),this.fillSelection(this.props.options.Ia_table,"SNIa - Model","Ia_table",!0),Object(h.jsx)("hr",{class:"mt-3 mb-3"}),this.fillSelection(this.props.options.cc_table,"SNcc - Model","cc_table",!0),this.fillSelection(this.props.options.cc_imf,"SNcc - IMF","cc_imf"),this.fillSelection(this.props.options.cc_mass_range,"SNcc - Mass Range","cc_mass_range"),Object(h.jsx)("hr",{class:"mt-3 mb-3"}),this.fillSelection(this.props.options.solar_table,"Solar Table","solar_table",!0),this.fillSelection(this.props.options.ref_element,"Reference Element","ref_element"),this.fillSelection(this.props.options.sigma,"Confidence","sigma")]})})}}]),c}(n.a.Component),m=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).state={img_data:""},s}return Object(b.a)(c,[{key:"componentDidMount",value:function(){this.setState({img_data:this.props.getPlotArea().img_data})}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)("center",{children:Object(h.jsx)("div",{id:"image_div",class:"row box center mt-3",children:Object(h.jsx)("div",{class:"col-md-12 text-center",children:Object(h.jsx)("img",{src:"data:image/png;base64,"+this.props.getPlotArea().img_data,alt:"Fit Image"})})})}),Object(h.jsxs)("div",{class:"row input-group input-group-sm m-1 mr-2 mt-2",children:[Object(h.jsx)("div",{class:"input-group-prepend",children:Object(h.jsx)("span",{class:"input-group-text",children:"Status"})}),Object(h.jsx)("input",{type:"text",class:"form-control",id:"status",value:this.props.getStatus()})]}),Object(h.jsxs)("div",{class:"row",children:[Object(h.jsx)("div",{class:"col-md-8 text-center",children:Object(h.jsx)("div",{class:"custom-form",children:Object(h.jsx)("table",{id:"middle_table",class:"table table-sm table-hover table-inverse table-responsive-sm",children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",class:"text-center align-middle",children:"Chi-Squared"}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",style:{height:"2em"},class:"form-control",id:"val_chi",value:this.props.getResults().chi_squared})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",class:"text-center align-middle",children:"D.o.f."}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",style:{height:"2em"},class:"form-control",id:"val_dof",value:this.props.getResults().dof})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{scope:"row",class:"text-center align-middle",children:"Ratio %"}),Object(h.jsx)("td",{children:Object(h.jsx)("input",{type:"text",style:{height:"2em"},class:"form-control",id:"val_ratio",value:this.props.getResults().ratio})})]})]})})})}),Object(h.jsx)("div",{class:"col-md-4 text-center",children:Object(h.jsx)("table",{id:"middle_table_",class:"table table-sm table-hover table-inverse table-responsive-sm",children:Object(h.jsxs)("tbody",{children:[Object(h.jsx)("tr",{children:Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("form",{name:"fit",children:Object(h.jsx)("input",{class:"btn btn-dark btn-sm btn-block",id:"btn_fit",value:"Fit",readOnly:!0,onClick:this.props.fitMethod})})})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("form",{name:"fit_loop",children:Object(h.jsx)("input",{class:"btn btn-dark btn-sm btn-block",id:"btn_fit_loop",value:"Fit All",readOnly:!0,disabled:!0,onClick:this.props.fitLoopMethod})})})}),Object(h.jsx)("tr",{children:Object(h.jsx)("td",{scope:"row",children:Object(h.jsx)("button",{id:"btn_detailed_results",type:"button",class:"btn btn-dark btn-sm btn-block",readOnly:!0,onClick:function(){alert(e.props.getDetailedResults())},children:"Detailed Results"})})})]})})})]})]})}}]),c}(n.a.Component),f=c(4),x=["C","N","O","Ne","Mg","Al","Si","S","Ar","Ca","Fe","Ni"],g=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(e){var s;return Object(o.a)(this,c),(s=t.call(this,e)).checkboxHandle=function(e){var t=e.target.checked,c=e.target.value,n="chb_"+c,a="val_"+c,l="err_"+c;1==t?(s.props.setElements(Object(f.a)({},n,1)),s.props.setElements(Object(f.a)({},a,"1.0")),s.props.setElements(Object(f.a)({},l,"0.1")),s.setState(Object(f.a)({},n,1)),s.setState(Object(f.a)({},a,"1.0")),s.setState(Object(f.a)({},l,"0.1"))):(s.props.setElements(Object(f.a)({},n,0)),s.props.setElements(Object(f.a)({},a,"")),s.props.setElements(Object(f.a)({},l,"")),s.setState(Object(f.a)({},n,0)),s.setState(Object(f.a)({},a,"")),s.setState(Object(f.a)({},l,"")))},s.handleValueChange=function(e){var t=e.target.id,c=e.target.value;s.props.setElements(Object(f.a)({},t,c)),s.setState(Object(f.a)({},t,c))},s.reset=function(){Object.keys(s.state).map((function(e){e.startsWith("chb_")?(s.props.setElements(Object(f.a)({},e,0)),s.setState(Object(f.a)({},e,0))):(s.props.setElements(Object(f.a)({},e,"")),s.setState(Object(f.a)({},e,"")))}))},s.state={chb_C:0,val_C:"",err_C:"",chb_N:0,val_N:"",err_N:"",chb_O:0,val_O:"",err_O:"",chb_Ne:0,val_Ne:"",err_Ne:"",chb_Mg:0,val_Mg:"",err_Mg:"",chb_Al:0,val_Al:"",err_Al:"",chb_Si:0,val_Si:"",err_Si:"",chb_S:0,val_S:"",err_S:"",chb_Ar:0,val_Ar:"",err_Ar:"",chb_Ca:0,val_Ca:"",err_Ca:"",chb_Fe:0,val_Fe:"",err_Fe:"",chb_Ni:0,val_Ni:"",err_Ni:""},s}return Object(b.a)(c,[{key:"fillElements",value:function(){var e,t=this,c=[],s=function(e){var c="chb_"+e,s="val_"+e,n="err_"+e;return Object(h.jsxs)("tr",{class:"table-row row",children:[Object(h.jsx)("td",{class:"text-left align-middle col-3",children:Object(h.jsxs)("label",{class:"custom-control",children:[Object(h.jsx)("input",{type:"checkbox",id:c,value:e,onChange:t.checkboxHandle,checked:t.state[c]}),e]})}),Object(h.jsx)("td",{scope:"col",class:"col-3 text-center",children:Object(h.jsx)("input",{type:"text",class:"myBox form-control",id:s,disabled:!t.state[c],value:t.state[s],onChange:t.handleValueChange})}),Object(h.jsx)("td",{scope:"col",class:"text-center align-middle col-3",children:Object(h.jsx)("label",{children:"+/-"})}),Object(h.jsx)("td",{scope:"col",class:"col-3 text-center",children:Object(h.jsx)("input",{type:"text",class:"myBox form-control",id:n,disabled:!t.state[c],value:t.state[n],onChange:t.handleValueChange})})]},e)},n=Object(p.a)(x);try{for(n.s();!(e=n.n()).done;){var a=e.value;c.push(s(a))}}catch(l){n.e(l)}finally{n.f()}return Object(h.jsxs)("table",{id:"element_table",class:"flex-container table table-sm table-hover table-inverse table-responsive mt-2",children:[Object(h.jsx)("thead",{class:"thead-inverse",children:Object(h.jsxs)("tr",{class:"table-row row",children:[Object(h.jsx)("th",{class:"col-3",children:" "}),Object(h.jsx)("th",{class:"col-3",children:"Value"}),Object(h.jsx)("th",{class:"col-3"}),Object(h.jsx)("th",{class:"col-3",children:"Error"})]})}),Object(h.jsx)("tbody",{children:c})]})}},{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{children:[Object(h.jsx)("p",{id:"elements_header",class:"m-4 text-center",children:"Abundance Values"}),this.fillElements(),Object(h.jsx)("hr",{}),Object(h.jsx)("input",{class:"btn btn-dark btn-sm btn-block mb-3",id:"btn_reset",value:"Reset",readOnly:!0,onClick:this.reset})]})})}}]),c}(n.a.Component),S={Ia_table:[],cc_imf:[],cc_mass_range:[],cc_table:[],input_data:[],mass_number_table:[],ref_element:[],sigma:[],solar_table:[]},y={fit_results:{chi_squared:"",dof:"",ratio:""},fit_results_text:"",min_elements_selected:!1,ref_element_selected:!1},k={Ia_table:0,cc_imf:0,cc_mass_range:0,cc_table:0,input_data:0,mass_number_table:0,ref_element:0,sigma:0,solar_table:0},C=function(){var e=Object(s.useState)(S),t=Object(_.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(k),l=Object(_.a)(a,2),r=l[0],i=l[1],o=Object(s.useState)({chb_C:0,val_C:"",err_C:"",chb_N:0,val_N:"",err_N:"",chb_O:0,val_O:"",err_O:"",chb_Ne:0,val_Ne:"",err_Ne:"",chb_Mg:0,val_Mg:"",err_Mg:"",chb_Al:0,val_Al:"",err_Al:"",chb_Si:0,val_Si:"",err_Si:"",chb_S:0,val_S:"",err_S:"",chb_Ar:0,val_Ar:"",err_Ar:"",chb_Ca:0,val_Ca:"",err_Ca:"",chb_Fe:0,val_Fe:"",err_Fe:"",chb_Ni:0,val_Ni:"",err_Ni:""}),b=Object(_.a)(o,2),d=b[0],j=b[1],u=Object(s.useState)(y),O=Object(_.a)(u,2),p=O[0],f=O[1],x=Object(s.useState)(""),C=Object(_.a)(x,2),w=C[0],N=C[1],A=Object(s.useState)("Welcome to the SNeRatio App.."),E=Object(_.a)(A,2),M=E[0],F=E[1],R=Object(s.useState)(!1),I=Object(_.a)(R,2),T=I[0],P=I[1],D=Object(s.useState)(!0),L=Object(_.a)(D,2),V=(L[0],L[1]);Object(s.useEffect)((function(){fetch("/sneratio/get_info").then((function(e){if(e.ok)return e.json()})).then((function(e){n(e.options),i(e.selections),f(y)})),fetch("/sneratio/get_empty_plot").then((function(e){if(e.ok)return e.json()})).then((function(e){N(e)}))}),[]);var W=function(){var e="",t=r.ref_element,s=c.ref_element[t];if(1!=d["chb_"+s])return[!1,e="Warning: Reference element should be selected! ("+s+")"];var n=0;for(var a in d)a.startsWith("chb_")&&1===d[a]&&(n+=1);return n>=3?[!0,e]:[!1,e="Warning: At least three (3) elements should be selected! (Current: "+n+")"]},B=function e(){console.log("statusUpdater"),fetch("/sneratio/check_fit_loop").then((function(e){return e.json()})).then((function(t){V(t.task_done),!0===t.task_done?(N({img_data:t.img_data}),F(t.status),P(!1),console.log("get_fit_loop_result"),fetch("/sneratio/get_fit_loop_result").then((function(e){return e.json()})).then((function(e){N({img_data:e.img_data}),F(e.status),P(!1)}))):(F(t.status),setTimeout(e,3e3))}))};return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("div",{class:"container-fluid",id:"main_container",children:Object(h.jsxs)("div",{class:"row container-fullwidth",id:"content_row",children:[Object(h.jsx)("div",{id:"left_column",class:"col-md-3",children:Object(h.jsx)(v,{options:c,handleOptions:function(e){var t=e.target.id,s=e.target.value;"Ia_table"!==t&&"cc_table"!==t&&"solar_table"!==t||(s+=".txt",console.log(s));var n=c[t].indexOf(s);r[t]=n}})}),Object(h.jsx)("div",{id:"middle_column",class:"col-md-6",children:Object(h.jsx)(m,{fitMethod:function(){!function(){var e=W(),t=e[0],c=e[1];if(!1===t)F(c);else{var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selections:r,elements:d})};fetch("/sneratio/fit",s).then((function(e){return e.json()})).then((function(e){N({img_data:e.img_data}),f(e.results),F(e.status)})).catch((function(e){return console.log("Form submit error",e)}))}}()},fitLoopMethod:function(){!function(){var e=W(),t=e[0],c=e[1];if(!1===t)F(c);else if(0==T){console.log("fit_loop");var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selections:r,elements:d})};fetch("/sneratio/start_fit_loop",s).then((function(e){return e.json()})).then((function(e){N({img_data:e.img_data}),f(e.results),F(e.status),P(!0),V(!1),B()})).catch((function(e){return console.log("Form submit error",e)}))}}()},getPlotArea:function(){return w},getResults:function(){return p.fit_results},getDetailedResults:function(){return p.fit_results_text},getStatus:function(){return M}})}),Object(h.jsx)("div",{id:"right_column",class:"col-md-3",children:Object(h.jsx)(g,{getElements:function(e){return d[e]},setElements:function(e){j((function(t){return Object.assign({},t,e)}))}})})]})})})})},w=function(e){Object(d.a)(c,e);var t=Object(j.a)(c);function c(){return Object(o.a)(this,c),t.apply(this,arguments)}return Object(b.a)(c,[{key:"render",value:function(){return Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"This is error page!"})})}}]),c}(n.a.Component);var N=function(){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("head",{children:[Object(h.jsx)("meta",{charset:"utf-8"}),Object(h.jsx)("title",{children:"M.K.Erdim"})]}),Object(h.jsx)("body",{children:Object(h.jsxs)(r.a,{children:[Object(h.jsx)(u,{}),Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{exact:!0,path:"/",component:C}),Object(h.jsx)(i.a,{exact:!0,path:"/sneratio",component:C}),Object(h.jsx)(i.a,{component:w})," // Error Page"]}),Object(h.jsx)(O,{})]})})]})},A=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,43)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,l=t.getTTFB;c(e),s(e),n(e),a(e),l(e)}))};c(39),c(40);l.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root")),A()}},[[42,1,2]]]);
//# sourceMappingURL=main.c79a7355.chunk.js.map